<!-- ============================================================= FOOTER ============================================================= -->
<footer id="footer" class="footer color-bg">
    <div class="footer-bottom">
        <div class="container">
            <div class="row">
                <div class="col-xs-12 col-sm-6 col-md-3">
                    <div class="module-heading">
                        <h4 class="module-title">Contact Us</h4>
                    </div>
                    <!-- /.module-heading -->

                    <div class="module-body">
                        <ul class="toggle-footer" style="">
                            <li class="media">
                                <div class="pull-left"> <span class="icon fa-stack fa-lg"> <i
                                            class="fa fa-map-marker fa-stack-1x fa-inverse"></i> </span> </div>
                                <div class="media-body">
                                    <p>ThemesGround, 789 Main rd, Anytown, CA 12345 USA</p>
                                </div>
                            </li>
                            <li class="media">
                                <div class="pull-left"> <span class="icon fa-stack fa-lg"> <i
                                            class="fa fa-mobile fa-stack-1x fa-inverse"></i> </span> </div>
                                <div class="media-body">
                                    <p>+(888) 123-4567<br>
                                        +(888) 456-7890</p>
                                </div>
                            </li>
                            <li class="media">
                                <div class="pull-left"> <span class="icon fa-stack fa-lg"> <i
                                            class="fa fa-envelope fa-stack-1x fa-inverse"></i> </span> </div>
                                <div class="media-body"> <span><a href="#">flipmart@themesground.com</a></span>
                                </div>
                            </li>
                        </ul>
                    </div>
                    <!-- /.module-body -->
                </div>
                <!-- /.col -->

                <div class="col-xs-12 col-sm-6 col-md-3">
                    <div class="module-heading">
                        <h4 class="module-title">Customer Service</h4>
                    </div>
                    <!-- /.module-heading -->

                    <div class="module-body">
                        <ul class='list-unstyled'>
                            <li class="first"><a href="#" title="Contact us">My Account</a></li>
                            <li><a href="#" title="About us">Order History</a></li>
                            <li><a href="#" title="faq">FAQ</a></li>
                            <li><a href="#" title="Popular Searches">Specials</a></li>
                            <li class="last"><a href="#" title="Where is my order?">Help Center</a></li>
                        </ul>
                    </div>
                    <!-- /.module-body -->
                </div>
                <!-- /.col -->

                <div class="col-xs-12 col-sm-6 col-md-3">
                    <div class="module-heading">
                        <h4 class="module-title">Corporation</h4>
                    </div>
                    <!-- /.module-heading -->

                    <div class="module-body">
                        <ul class='list-unstyled'>
                            <li class="first"><a title="Your Account" href="#">About us</a></li>
                            <li><a title="Information" href="#">Customer Service</a></li>
                            <li><a title="Addresses" href="#">Company</a></li>
                            <li><a title="Addresses" href="#">Investor Relations</a></li>
                            <li class="last"><a title="Orders History" href="#">Advanced Search</a></li>
                        </ul>
                    </div>
                    <!-- /.module-body -->
                </div>
                <!-- /.col -->

                <div class="col-xs-12 col-sm-6 col-md-3">
                    <div class="module-heading">
                        <h4 class="module-title">Why Choose Us</h4>
                    </div>
                    <!-- /.module-heading -->

                    <div class="module-body">
                        <ul class='list-unstyled'>
                            <li class="first"><a href="#" title="About us">Shopping Guide</a></li>
                            <li><a href="#" title="Blog">Blog</a></li>
                            <li><a href="#" title="Company">Company</a></li>
                            <li><a href="#" title="Investor Relations">Investor Relations</a></li>
                            <li class=" last"><a href="contact-us.html" title="Suppliers">Contact Us</a></li>
                        </ul>
                    </div>
                    <!-- /.module-body -->
                </div>
            </div>
        </div>
    </div>
    <div class="copyright-bar">
        <div class="container">
            <div class="col-xs-12 col-sm-6 no-padding social">
                <ul class="link">
                    <li class="fb pull-left"><a target="_blank" rel="nofollow" href="#" title="Facebook"></a></li>
                    <li class="tw pull-left"><a target="_blank" rel="nofollow" href="#" title="Twitter"></a></li>
                    <li class="googleplus pull-left"><a target="_blank" rel="nofollow" href="#"
                            title="GooglePlus"></a>
                    </li>
                    <li class="rss pull-left"><a target="_blank" rel="nofollow" href="#" title="RSS"></a>
                    </li>
                    <li class="pintrest pull-left"><a target="_blank" rel="nofollow" href="#"
                            title="PInterest"></a>
                    </li>
                    <li class="linkedin pull-left"><a target="_blank" rel="nofollow" href="#"
                            title="Linkedin"></a></li>
                    <li class="youtube pull-left"><a target="_blank" rel="nofollow" href="#"
                            title="Youtube"></a></li>
                </ul>
            </div>
            <div class="col-xs-12 col-sm-6 no-padding">
                <div class="clearfix payment-methods">
                    <ul>
                        <li><img src="{{ asset('frontend/assets') }}/images/payments/1.png" alt=""></li>
                        <li><img src="{{ asset('frontend/assets') }}/images/payments/2.png" alt=""></li>
                        <li><img src="{{ asset('frontend/assets') }}/images/payments/3.png" alt=""></li>
                        <li><img src="{{ asset('frontend/assets') }}/images/payments/4.png" alt=""></li>
                        <li><img src="{{ asset('frontend/assets') }}/images/payments/5.png" alt=""></li>
                    </ul>
                </div>
                <!-- /.payment-methods -->
            </div>
        </div>
    </div>
</footer>
<!-- ============================================================= FOOTER : END============================================================= -->



<!-- ============== PRODUCT MODAL BODY ============= -->
<!-- Modal -->
<div class="modal fade" id="productModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel"><span class="pname"></span></h5>
                <button type="button" class="close " data-dismiss="modal" aria-label="Close">
                    <span class="close-modal" aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body pmodal-body">
                <div class="loading-snipper">
                    <img src="{{ asset('frontend/assets/images/loading.gif') }}" alt="Loading...">
                </div>

                <div class="row">
                    <div class="col-md-4">
                        <img class="card-img-top pimage" alt="Product Image">
                    </div>
                    <div class="col-md-5">
                        <ul class="list-group">
                            <li class="list-group-item">Product Price: <b><span class="main-price"></span></b> <del
                                    class="old-price"></del></li>
                            <li class="list-group-item">Product Code: <b><span class="pcode"></span></b></li>
                            <li class="list-group-item">Category: <b><span class="pcategory"></span></b></li>
                            <li class="list-group-item">Brand: <b><span class="pbrand"></span></b></li>
                            <li class="list-group-item">Stock: <span class="pstock">
                                    <span class="badge badge-primary stock-available"
                                        style="background: #28a745; color:white">Available</span>
                                    <span class="badge badge-danger stock-out"
                                        style="background: #dc3545; color:white">Stock Out!</span>
                                </span></li>
                        </ul>
                    </div>
                    <div class="col-md-3">
                        <div class="form-group">
                            <label for="chooseColor">Choose Color</label>
                            <select class="form-control" id="pColour" name="colour">
                            </select>
                        </div>
                        <div class="form-group psize-area">
                            <label for="chooseSize">Choose Size</label>
                            <select class="form-control" id="pSize" name="size">
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="chooseQuantity">Choose Quantity</label>
                            <input type="number" name="quantity" min="1" class="form-control"
                                id="pQuantity">
                        </div>
                        <input type="hidden" class="pid">
                        <button class="btn btn-primary btn-md" onclick="addToCart();">Add to Cart</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


<!-- For demo purposes – can be removed on production -->

<!-- For demo purposes – can be removed on production : End -->

<!-- JavaScripts placed at the end of the document so the pages load faster -->
<script src="{{ asset('frontend/assets') }}/js/jquery-1.11.1.min.js"></script>
<script src="{{ asset('frontend/assets') }}/js/bootstrap.min.js"></script>
<script src="{{ asset('frontend/assets') }}/js/bootstrap-hover-dropdown.min.js"></script>
<script src="{{ asset('frontend/assets') }}/js/owl.carousel.min.js"></script>
<script src="{{ asset('frontend/assets') }}/js/echo.min.js"></script>
<script src="{{ asset('frontend/assets') }}/js/jquery.easing-1.3.min.js"></script>
<script src="{{ asset('frontend/assets') }}/js/bootstrap-slider.min.js"></script>
<script src="{{ asset('frontend/assets') }}/js/jquery.rateit.min.js"></script>
<script type="text/javascript" src="{{ asset('frontend/assets') }}/js/lightbox.min.js"></script>
<script src="{{ asset('frontend/assets') }}/js/bootstrap-select.min.js"></script>
<script src="{{ asset('frontend/assets') }}/js/wow.min.js"></script>

<script src="{{ asset('frontend/assets') }}/js/toastr.min.js"></script>
<script src="{{ asset('frontend/assets') }}/js/sweetalert2@10.js"></script>
<script src="{{ asset('frontend/assets') }}/js/scripts.js"></script>
@stack('js')
<script>
    @if (count($errors) > 0)
        @foreach ($errors->all() as $error)
            toastr.error("{{ $error }}");
        @endforeach
    @endif

    @if (Session::has('message'))
        var type = "{{ Session::get('alert-type', 'info') }}"
        switch (type) {
            case 'info':
                toastr.info(" {{ Session::get('message') }} ");
                break;

            case 'success':
                toastr.success(" {{ Session::get('message') }} ");
                break;

            case 'warning':
                toastr.warning(" {{ Session::get('message') }} ");
                break;

            case 'error':
                toastr.error(" {{ Session::get('message') }} ");
                break;
        }
    @endif

    $.ajaxSetup({
        headers: {
            'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content')
        }
    });

    // Product View Modal with product details
    function productView(id) {
        $('.loading-snipper').show();
        $('.stock-available').hide();
        $('.stock-out').hide();
        $('.pmodal-body .row').addClass('invisible');

        $.ajax({
            type: 'GET',
            dataType: 'json',
            url: "/product/view/modal/" + id,
            success: function(data) {
                $(".pid").val(data.product.id);
                $("#pQuantity").val(1);
                $(".pname").text(data.product.name);
                $(".pimage").attr("src", "{{ asset('uploads/backend/thumbnail/') }}" + "/" + data.product
                    .thumbnail);
                $(".pcode").text(data.product.code);
                $(".pcategory").text(data.product.category.name);
                $(".pbrand").text(data.product.brand.name);

                $('select[name="colour"]').empty();
                $.each(data.product.colours, function(key, value) {
                    $('select[name="colour"]').append('<option value=" ' + value.name + ' ">' +
                        value.name +
                        '</option>')
                });


                $('select[name="size"]').empty();

                if (data.product.sizes.length > 0) {
                    $('.psize-area').show();
                    $.each(data.product.sizes, function(key, value) {
                        $('select[name="size"]').append('<option value=" ' + value.size + ' ">' +
                            value.size +
                            '</option>');
                    });
                } else {
                    $('.psize-area').hide();
                }


                if (data.product.quantity > 0) {
                    $('.stock-available').show();
                } else {
                    $('.stock-out').show();
                }

                $('.main-price').text("");
                $('.old-price').text("");
                if (data.product.discount_price == null) {
                    $('.main-price').text("$" + data.product.selling_price);
                } else {
                    $('.main-price').text("$" + data.product.discount_price);
                    $('.old-price').text("$" + data.product.selling_price);
                }

                $('.loading-snipper').hide();
                $('.pmodal-body .row').removeClass('invisible');

            }
        });
    }

    function addToCart() {
        let id = $(".pid").val();
        let product_name = $(".pname").text();
        let colour = $("#pColour option:selected").text();
        let size = $("#pSize option:selected").text();
        let quantity = $('#pQuantity').val();
        // console.log(id, product_name, color, size, quantity);
        $.ajax({
            type: 'POST',
            dataType: 'json',
            data: {
                colour: colour,
                size: size,
                quantity: quantity,
                product_name: product_name,
            },
            url: "/cart/data/store/" + id,

            success: function(data) {
                miniCart();
                $(".close-modal").click();

                // Add to cart toster message
                const Toast = Swal.mixin({
                    toast: true,
                    position: 'top-end',
                    icon: 'success',
                    showConfirmButton: false,
                    timer: 3000
                });
                if ($.isEmptyObject(data.error)) {
                    Toast.fire({
                        type: 'success',
                        title: data.success
                    })
                } else {
                    Toast.fire({
                        type: 'error',
                        title: data.error
                    })
                }


            }
        });
    }

    function miniCart() {
        $.ajax({
            type: 'GET',
            url: '/product/mini/cart',
            dataType: 'json',
            success: function(response) {
                $('span[id="cartSubTotal"]').text(response.subTotal);
                $('#cartQty').text(response.cartQty);
                var miniCart = "";
                $.each(response.carts, function(key, value) {
                    miniCart += `<div class="cart-item product-summary">
          <div class="row">
            <div class="col-xs-4">
              <div class="image"> <a href="detail.html"><img src="/uploads/backend/thumbnail/${value.options.image}" alt=""></a> </div>
            </div>
            <div class="col-xs-7">
              <h3 class="name"><a href="index.php?page-detail">${value.name}</a></h3>
              <div class="price"><span>$</span> ${value.price} * ${value.qty} </div>
            </div>
            <div class="col-xs-1 action"> <button type="submit" id="${value.rowId}" onclick="miniCartRemove(this.id)"><i class="fa fa-trash"></i></button> </div> </div>
          </div>
        </div>
        <!-- /.cart-item -->
        <div class="clearfix"></div>
        <hr>`
                });

                $('#miniCart').html(miniCart);
            }
        })
    }
    miniCart();


    function miniCartRemove(rowId) {
        $.ajax({
            type: 'GET',
            url: '/minicart/product-remove/' + rowId,
            dataType: 'json',
            success: function(data) {
                miniCart();
                // Start Message 
                const Toast = Swal.mixin({
                    toast: true,
                    position: 'top-end',
                    icon: 'success',
                    showConfirmButton: false,
                    timer: 3000
                })
                if ($.isEmptyObject(data.error)) {
                    Toast.fire({
                        type: 'success',
                        title: data.success
                    })
                } else {
                    Toast.fire({
                        type: 'error',
                        title: data.error
                    })
                }
                // End Message 
            }
        });
    }
</script>
</body>

</html>
